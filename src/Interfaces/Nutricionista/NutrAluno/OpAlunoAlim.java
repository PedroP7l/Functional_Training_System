/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

package Interfaces.Nutricionista.NutrAluno;

import java.awt.Graphics2D;
import java.awt.GraphicsConfiguration;
import java.awt.GraphicsDevice;
import java.awt.GraphicsEnvironment;
import java.awt.Image;
import java.awt.image.BufferedImage;
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.IOException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.imageio.ImageIO;
import javax.swing.Icon;
import javax.swing.ImageIcon;
import javax.swing.JOptionPane;
import javax.swing.table.DefaultTableModel;
import objetos.Aluno;
import objetos_dao.AlunoDAO;

/**
 *
 * @author Marco Antônio
 */
public class OpAlunoAlim extends javax.swing.JPanel {

    /** Creates new form Alunos */
    
    AlunoDAO alunoBanco =  new AlunoDAO();
    
  //  BancoFalso mestre = new BancoFalso();
    public static Aluno tempAlun = new Aluno();
    public static String extensao = "";
    public static int indice = -1;
    public OpAlunoAlim() {
        initComponents();
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        ProcuraFoto = new javax.swing.JFileChooser();
        buttonGroup1 = new javax.swing.ButtonGroup();
        Titulo = new javax.swing.JLabel();
        TelaAlun = new javax.swing.JTabbedPane();
        AbaAlun = new javax.swing.JPanel();
        fotoAlun = new javax.swing.JLabel();
        TelefoneAlun = new javax.swing.JLabel();
        telefoneAlun = new javax.swing.JLabel();
        EmailAlun = new javax.swing.JLabel();
        emailAlun = new javax.swing.JLabel();
        NomeAlun = new javax.swing.JLabel();
        nomeAlun = new javax.swing.JLabel();
        CPFAlun = new javax.swing.JLabel();
        cpfAlun = new javax.swing.JLabel();
        SexoAlun = new javax.swing.JLabel();
        sexoAlun = new javax.swing.JLabel();
        DataNascAlun = new javax.swing.JLabel();
        dataNascAlun = new javax.swing.JLabel();
        AbaCadAlun = new javax.swing.JPanel();
        fotoCadAlun = new javax.swing.JLabel();
        NomeCadAlun = new javax.swing.JLabel();
        SalvarFicha = new javax.swing.JButton();
        jScrollPane1 = new javax.swing.JScrollPane();
        fichaAluno = new javax.swing.JTextArea();
        TabelaPesquisaAlun = new javax.swing.JPanel();
        PesquisarAlun = new javax.swing.JButton();
        pesquisarAlun = new javax.swing.JTextField();
        ScrollTabelaAlun = new javax.swing.JScrollPane();
        TabelaAlun = new javax.swing.JTable();
        LimparFunc = new javax.swing.JButton();

        addAncestorListener(new javax.swing.event.AncestorListener() {
            public void ancestorAdded(javax.swing.event.AncestorEvent evt) {
                formAncestorAdded(evt);
            }
            public void ancestorMoved(javax.swing.event.AncestorEvent evt) {
            }
            public void ancestorRemoved(javax.swing.event.AncestorEvent evt) {
            }
        });

        Titulo.setFont(new java.awt.Font("Impact", 0, 30)); // NOI18N
        Titulo.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        Titulo.setText("Ficha de alimentação");

        TelaAlun.setBorder(javax.swing.BorderFactory.createEmptyBorder(1, 1, 1, 1));
        TelaAlun.setFont(new java.awt.Font("Dialog", 1, 18)); // NOI18N

        AbaAlun.setBorder(javax.swing.BorderFactory.createEmptyBorder(1, 1, 1, 1));

        fotoAlun.setBorder(new javax.swing.border.SoftBevelBorder(javax.swing.border.BevelBorder.RAISED));

        TelefoneAlun.setFont(new java.awt.Font("Impact", 0, 18)); // NOI18N
        TelefoneAlun.setText("Telefone:");

        telefoneAlun.setFont(new java.awt.Font("Arial", 0, 18)); // NOI18N
        telefoneAlun.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        telefoneAlun.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);

        EmailAlun.setFont(new java.awt.Font("Impact", 0, 18)); // NOI18N
        EmailAlun.setText("Email:");

        emailAlun.setFont(new java.awt.Font("Arial", 0, 18)); // NOI18N
        emailAlun.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        emailAlun.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);

        NomeAlun.setFont(new java.awt.Font("Impact", 0, 18)); // NOI18N
        NomeAlun.setText("Nome:");

        nomeAlun.setFont(new java.awt.Font("Arial", 0, 18)); // NOI18N

        CPFAlun.setFont(new java.awt.Font("Impact", 0, 18)); // NOI18N
        CPFAlun.setText("CPF:");

        cpfAlun.setFont(new java.awt.Font("Arial", 0, 18)); // NOI18N

        SexoAlun.setFont(new java.awt.Font("Impact", 0, 18)); // NOI18N
        SexoAlun.setText("Sexo:");

        sexoAlun.setFont(new java.awt.Font("Arial", 0, 18)); // NOI18N

        DataNascAlun.setFont(new java.awt.Font("Impact", 0, 18)); // NOI18N
        DataNascAlun.setText("Data de Nasc:");

        dataNascAlun.setFont(new java.awt.Font("Arial", 0, 18)); // NOI18N

        javax.swing.GroupLayout AbaAlunLayout = new javax.swing.GroupLayout(AbaAlun);
        AbaAlun.setLayout(AbaAlunLayout);
        AbaAlunLayout.setHorizontalGroup(
            AbaAlunLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(AbaAlunLayout.createSequentialGroup()
                .addGroup(AbaAlunLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addGroup(AbaAlunLayout.createSequentialGroup()
                        .addGap(99, 99, 99)
                        .addComponent(fotoAlun, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(92, 92, 92))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, AbaAlunLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(AbaAlunLayout.createSequentialGroup()
                            .addGroup(AbaAlunLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                .addGroup(AbaAlunLayout.createSequentialGroup()
                                    .addGap(115, 115, 115)
                                    .addComponent(TelefoneAlun))
                                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, AbaAlunLayout.createSequentialGroup()
                                    .addGap(127, 127, 127)
                                    .addComponent(EmailAlun)
                                    .addGap(34, 34, 34)))
                            .addGap(86, 86, 86))
                        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, AbaAlunLayout.createSequentialGroup()
                            .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(telefoneAlun, javax.swing.GroupLayout.PREFERRED_SIZE, 170, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGap(51, 51, 51)))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, AbaAlunLayout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(emailAlun, javax.swing.GroupLayout.PREFERRED_SIZE, 240, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(16, 16, 16)))
                .addGroup(AbaAlunLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(AbaAlunLayout.createSequentialGroup()
                        .addComponent(NomeAlun)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(nomeAlun, javax.swing.GroupLayout.PREFERRED_SIZE, 224, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(18, 18, 18)
                        .addComponent(DataNascAlun)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(dataNascAlun, javax.swing.GroupLayout.PREFERRED_SIZE, 172, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(AbaAlunLayout.createSequentialGroup()
                        .addComponent(CPFAlun)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(cpfAlun, javax.swing.GroupLayout.PREFERRED_SIZE, 129, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(AbaAlunLayout.createSequentialGroup()
                        .addComponent(SexoAlun)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(sexoAlun, javax.swing.GroupLayout.PREFERRED_SIZE, 129, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(23, Short.MAX_VALUE))
        );
        AbaAlunLayout.setVerticalGroup(
            AbaAlunLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, AbaAlunLayout.createSequentialGroup()
                .addGroup(AbaAlunLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                    .addGroup(AbaAlunLayout.createSequentialGroup()
                        .addGap(18, 18, 18)
                        .addComponent(fotoAlun, javax.swing.GroupLayout.PREFERRED_SIZE, 110, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(6, 6, 6)
                        .addComponent(TelefoneAlun))
                    .addGroup(AbaAlunLayout.createSequentialGroup()
                        .addGroup(AbaAlunLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addGroup(AbaAlunLayout.createSequentialGroup()
                                .addGroup(AbaAlunLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                    .addComponent(NomeAlun)
                                    .addComponent(nomeAlun, javax.swing.GroupLayout.PREFERRED_SIZE, 23, javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addGap(18, 18, 18))
                            .addGroup(javax.swing.GroupLayout.Alignment.LEADING, AbaAlunLayout.createSequentialGroup()
                                .addGap(51, 51, 51)
                                .addGroup(AbaAlunLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                    .addComponent(DataNascAlun)
                                    .addComponent(dataNascAlun, javax.swing.GroupLayout.PREFERRED_SIZE, 23, javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                        .addGroup(AbaAlunLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(CPFAlun)
                            .addComponent(cpfAlun, javax.swing.GroupLayout.PREFERRED_SIZE, 23, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(18, 18, 18)
                        .addGroup(AbaAlunLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(SexoAlun)
                            .addComponent(sexoAlun, javax.swing.GroupLayout.PREFERRED_SIZE, 23, javax.swing.GroupLayout.PREFERRED_SIZE))))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(telefoneAlun, javax.swing.GroupLayout.PREFERRED_SIZE, 23, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(EmailAlun)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(emailAlun, javax.swing.GroupLayout.PREFERRED_SIZE, 23, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        TelaAlun.addTab("Alunos", AbaAlun);

        AbaCadAlun.setBorder(javax.swing.BorderFactory.createEmptyBorder(1, 1, 1, 1));

        fotoCadAlun.setBorder(new javax.swing.border.SoftBevelBorder(javax.swing.border.BevelBorder.RAISED));

        NomeCadAlun.setFont(new java.awt.Font("Impact", 0, 18)); // NOI18N
        NomeCadAlun.setText("Ficha:");

        SalvarFicha.setFont(new java.awt.Font("Impact", 0, 18)); // NOI18N
        SalvarFicha.setText("Salvar");
        SalvarFicha.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                SalvarFichaActionPerformed(evt);
            }
        });

        fichaAluno.setColumns(20);
        fichaAluno.setRows(5);
        fichaAluno.setWrapStyleWord(true);
        fichaAluno.setLineWrap(true);
        jScrollPane1.setViewportView(fichaAluno);

        javax.swing.GroupLayout AbaCadAlunLayout = new javax.swing.GroupLayout(AbaCadAlun);
        AbaCadAlun.setLayout(AbaCadAlunLayout);
        AbaCadAlunLayout.setHorizontalGroup(
            AbaCadAlunLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, AbaCadAlunLayout.createSequentialGroup()
                .addContainerGap(61, Short.MAX_VALUE)
                .addComponent(fotoCadAlun, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGroup(AbaCadAlunLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(AbaCadAlunLayout.createSequentialGroup()
                        .addGap(21, 21, 21)
                        .addComponent(NomeCadAlun))
                    .addGroup(AbaCadAlunLayout.createSequentialGroup()
                        .addGap(18, 18, 18)
                        .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 538, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(33, 33, 33)
                        .addComponent(SalvarFicha, javax.swing.GroupLayout.PREFERRED_SIZE, 101, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addGap(40, 40, 40))
        );
        AbaCadAlunLayout.setVerticalGroup(
            AbaCadAlunLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(AbaCadAlunLayout.createSequentialGroup()
                .addGap(46, 46, 46)
                .addComponent(fotoCadAlun, javax.swing.GroupLayout.PREFERRED_SIZE, 110, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap())
            .addGroup(AbaCadAlunLayout.createSequentialGroup()
                .addGap(20, 20, 20)
                .addComponent(NomeCadAlun)
                .addGroup(AbaCadAlunLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(AbaCadAlunLayout.createSequentialGroup()
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jScrollPane1))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, AbaCadAlunLayout.createSequentialGroup()
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 115, Short.MAX_VALUE)
                        .addComponent(SalvarFicha)
                        .addGap(69, 69, 69))))
        );

        TelaAlun.addTab("Ficha de Alimentação", AbaCadAlun);

        TabelaPesquisaAlun.setBorder(new javax.swing.border.SoftBevelBorder(javax.swing.border.BevelBorder.RAISED));

        PesquisarAlun.setFont(new java.awt.Font("Impact", 0, 18)); // NOI18N
        PesquisarAlun.setText("Pesquisar");
        PesquisarAlun.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                PesquisarAlunActionPerformed(evt);
            }
        });

        pesquisarAlun.setFont(new java.awt.Font("Arial", 0, 18)); // NOI18N
        pesquisarAlun.setPreferredSize(new java.awt.Dimension(74, 32));

        TabelaAlun.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        TabelaAlun.setFont(new java.awt.Font("Arial", 0, 18)); // NOI18N
        TabelaAlun.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null}
            },
            new String [] {
                "Nome", "CPF", "Dia de Pagameno"
            }
        ) {
            Class[] types = new Class [] {
                java.lang.String.class, java.lang.String.class, java.lang.Double.class
            };
            boolean[] canEdit = new boolean [] {
                false, false, false
            };

            public Class getColumnClass(int columnIndex) {
                return types [columnIndex];
            }

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        TabelaAlun.setToolTipText("");
        TabelaAlun.setAlignmentX(1.0F);
        TabelaAlun.setAlignmentY(1.0F);
        TabelaAlun.setRowHeight(28);
        TabelaAlun.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                TabelaAlunMouseClicked(evt);
            }
        });
        ScrollTabelaAlun.setViewportView(TabelaAlun);

        LimparFunc.setFont(new java.awt.Font("Impact", 0, 18)); // NOI18N
        LimparFunc.setText("Limpar");
        LimparFunc.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                LimparFuncActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout TabelaPesquisaAlunLayout = new javax.swing.GroupLayout(TabelaPesquisaAlun);
        TabelaPesquisaAlun.setLayout(TabelaPesquisaAlunLayout);
        TabelaPesquisaAlunLayout.setHorizontalGroup(
            TabelaPesquisaAlunLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(TabelaPesquisaAlunLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(PesquisarAlun)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(pesquisarAlun, javax.swing.GroupLayout.PREFERRED_SIZE, 154, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(LimparFunc)
                .addContainerGap())
            .addGroup(TabelaPesquisaAlunLayout.createSequentialGroup()
                .addGap(0, 0, Short.MAX_VALUE)
                .addComponent(ScrollTabelaAlun, javax.swing.GroupLayout.PREFERRED_SIZE, 894, javax.swing.GroupLayout.PREFERRED_SIZE))
        );
        TabelaPesquisaAlunLayout.setVerticalGroup(
            TabelaPesquisaAlunLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(TabelaPesquisaAlunLayout.createSequentialGroup()
                .addGroup(TabelaPesquisaAlunLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(PesquisarAlun)
                    .addComponent(pesquisarAlun, javax.swing.GroupLayout.PREFERRED_SIZE, 29, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(LimparFunc))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 16, Short.MAX_VALUE)
                .addComponent(ScrollTabelaAlun, javax.swing.GroupLayout.PREFERRED_SIZE, 186, javax.swing.GroupLayout.PREFERRED_SIZE))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(TelaAlun, javax.swing.GroupLayout.PREFERRED_SIZE, 900, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(TabelaPesquisaAlun, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(0, 0, Short.MAX_VALUE))
            .addGroup(layout.createSequentialGroup()
                .addGap(160, 160, 160)
                .addComponent(Titulo, javax.swing.GroupLayout.PREFERRED_SIZE, 552, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap(36, Short.MAX_VALUE)
                .addComponent(Titulo, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(TelaAlun, javax.swing.GroupLayout.PREFERRED_SIZE, 300, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(TabelaPesquisaAlun, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
        );
    }// </editor-fold>//GEN-END:initComponents

    private void SalvarFichaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_SalvarFichaActionPerformed
        // Botão Editar

        try {
            if (indice >= 0 && !cpfAlun.getText().isEmpty()) {

                tempAlun = new Aluno();
                tempAlun.setCPF(cpfAlun.getText());
                tempAlun.setFicha_alimentacao(fichaAluno.getText());   

                alunoBanco.alteraFicha(tempAlun);
                JOptionPane.showMessageDialog(null, "Ficha de alimentação salva com sucesso");
            }
        } catch (Exception e) {
            JOptionPane.showMessageDialog(null, e.getMessage());
        }
    }//GEN-LAST:event_SalvarFichaActionPerformed

    private void PesquisarAlunActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_PesquisarAlunActionPerformed
        try {
            // Botão Pesquisar Funcionário
            
            DefaultTableModel TF = (DefaultTableModel) TabelaAlun.getModel();
            TF.setNumRows(0);
            
            ArrayList<Aluno> alunos = alunoBanco.getLista();
            
            for (int i = 0; i < alunos.size(); i++) {
                
                if (alunos.get(i).getCPF().contains(pesquisarAlun.getText()) || alunos.get(i).getNome().contains(pesquisarAlun.getText())) {
                    
                    TF.addRow(new Object[]{
                        alunos.get(i).getNome(),
                        alunos.get(i).getCPF(),
                        alunos.get(i).getDia_pagamento(),});
                }
            }
        } catch (Exception ex) {
            Logger.getLogger(OpAlunoAlim.class.getName()).log(Level.SEVERE, null, ex);
        }
    }//GEN-LAST:event_PesquisarAlunActionPerformed

    private void TabelaAlunMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_TabelaAlunMouseClicked
        // Ao Clicar na Tabela

        indice = TabelaAlun.getSelectedRow();

        String CPF = TabelaAlun.getValueAt(indice, 1).toString();
              System.out.println(CPF);

        try {
            if (indice >= 0 && CPF != null) {
                Aluno aluno = alunoBanco.getAluno(CPF);
                //Aluno
                nomeAlun.setText(aluno.getNome());
                cpfAlun.setText(aluno.getCPF());
                
                if(aluno.getSexo() == 'F' || aluno.getSexo() == 'f')
                    sexoAlun.setText("Feminino");
                else
                    sexoAlun.setText("Masculino");
                dataNascAlun.setText(new SimpleDateFormat("dd/MM/yyyy").format(aluno.getDt_nascimento()));;
                telefoneAlun.setText(aluno.getTelefone());
                emailAlun.setText(aluno.getEmail());
                
                if(aluno.getImagem() == null)
                    fotoAlun.setIcon(iconScale(new ImageIcon(getClass().getResource("/Imagens/Perfil.png"))));
                else
                    fotoAlun.setIcon(new ImageIcon(aluno.getImagem()));

                //Controle
                fichaAluno.setText(aluno.getFicha_alimentacao());
                
                
                if(aluno.getImagem() == null)
                    fotoCadAlun.setIcon(iconScale(new ImageIcon(getClass().getResource("/Imagens/Perfil.png"))));
                else
                    fotoCadAlun.setIcon(new ImageIcon(aluno.getImagem()));

                SalvarFicha.setEnabled(true);

            } else {

                JOptionPane.showMessageDialog(null, "Selecione o Aluno na Tabela!!!");
                indice = -1;
            }

        } catch (Exception e) {

            JOptionPane.showMessageDialog(null, "Selecione um Aluno Valido!!!");
            indice = -1;
        }
    }//GEN-LAST:event_TabelaAlunMouseClicked

    private void LimparFuncActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_LimparFuncActionPerformed
        Limpar();
    }//GEN-LAST:event_LimparFuncActionPerformed

    private void formAncestorAdded(javax.swing.event.AncestorEvent evt) {//GEN-FIRST:event_formAncestorAdded
        try {
            AtualizaTabela();
            
            fotoAlun.setIcon(iconScale(new ImageIcon(getClass().getResource("/Imagens/Perfil.png"))));
            fotoCadAlun.setIcon(iconScale(new ImageIcon(getClass().getResource("/Imagens/Perfil.png"))));
            extensao = "png";
            
            SalvarFicha.setEnabled(false);

        } catch (Exception ex) {
            Logger.getLogger(OpAlunoAlim.class.getName()).log(Level.SEVERE, null, ex);
        }
    }//GEN-LAST:event_formAncestorAdded

    public void Limpar(){
        //Aluno
        nomeAlun.setText("");
        cpfAlun.setText("");
        sexoAlun.setText("");
        dataNascAlun.setText("");
        telefoneAlun.setText("");
        emailAlun.setText("");

        fotoAlun.setIcon(iconScale(new ImageIcon(getClass().getResource("/Imagens/Perfil.png"))));

        //Controle
        fichaAluno.setText("");
        fotoCadAlun.setIcon(iconScale(new ImageIcon(getClass().getResource("/Imagens/Perfil.png"))));
        
        extensao = "png";
        SalvarFicha.setEnabled(false);

        //Atualiza a Tabela
        AtualizaTabela();
    }  
    
    public void AtualizaTabela() {

        try {
            DefaultTableModel TF = (DefaultTableModel) TabelaAlun.getModel();
            TF.setNumRows(0);
            
            ArrayList<Aluno> alunos = alunoBanco.getLista();
            
            for (int i = 0; i < alunos.size(); i++) {
                
                TF.addRow(new Object[]{
                    alunos.get(i).getNome(),
                    alunos.get(i).getCPF(), /*mestre.alunos.get(i).dataPaga,*/});
            }
        } catch (Exception ex) {
            Logger.getLogger(OpAlunoAlim.class.getName()).log(Level.SEVERE, null, ex);
        }
        
    }
    
    public byte[] iconToByte(ImageIcon icon){
        
        BufferedImage bi = getBufferedImage(icon.getImage());
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        
        try {
            ImageIO.write(bi, "png" , baos);
        } catch (IOException ex) {
            Logger.getLogger(OpAlunoAlim.class.getName()).log(Level.SEVERE, null, ex);
        }

        byte[] byteArray= baos.toByteArray();
        return byteArray;
    }
    
    
    public static BufferedImage getBufferedImage(Image img)
    {
        if (img instanceof BufferedImage)
        {
           return (BufferedImage) img;
        }

        BufferedImage bimage = new BufferedImage(img.getWidth(null), 
                        img.getHeight(null), BufferedImage.TYPE_INT_ARGB);

        Graphics2D bGr = bimage.createGraphics();
        bGr.drawImage(img, 0, 0, null);
        bGr.dispose();

        // Return the buffered image
        return bimage;
    }
    
    static Image iconToImage(Icon icon) {
        if (icon instanceof ImageIcon) {
           return ((ImageIcon)icon).getImage();
        } 
        else {
           int w = icon.getIconWidth();
           int h = icon.getIconHeight();
           GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
           GraphicsDevice gd = ge.getDefaultScreenDevice();
           GraphicsConfiguration gc = gd.getDefaultConfiguration();
           BufferedImage image = gc.createCompatibleImage(w, h);
           Graphics2D g = image.createGraphics();
           icon.paintIcon(null, g, 0, 0);
           g.dispose();
           return image;
        }
 }   
    
    private static String getFileExtension(File file) {
        String fileName = file.getName();
        if(fileName.lastIndexOf(".") != -1 && fileName.lastIndexOf(".") != 0)
        return fileName.substring(fileName.lastIndexOf(".")+1);
        else return "";
    }
    
    public static ImageIcon iconScale(ImageIcon imageIcon){
        
        Image image = imageIcon.getImage(); // transform it 
        Image newimg = image.getScaledInstance(100, 110,  java.awt.Image.SCALE_SMOOTH); // scale it the smooth way  
        imageIcon = new ImageIcon(newimg);
        
        return imageIcon;
    }
    
    public boolean isValidEmailAddress(String email) {
           String ePattern = "^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$";
           java.util.regex.Pattern p = java.util.regex.Pattern.compile(ePattern);
           java.util.regex.Matcher m = p.matcher(email);
           return m.matches();
    }
        
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JPanel AbaAlun;
    private javax.swing.JPanel AbaCadAlun;
    private javax.swing.JLabel CPFAlun;
    private javax.swing.JLabel DataNascAlun;
    private javax.swing.JLabel EmailAlun;
    private javax.swing.JButton LimparFunc;
    private javax.swing.JLabel NomeAlun;
    private javax.swing.JLabel NomeCadAlun;
    private javax.swing.JButton PesquisarAlun;
    private javax.swing.JFileChooser ProcuraFoto;
    private javax.swing.JButton SalvarFicha;
    private javax.swing.JScrollPane ScrollTabelaAlun;
    private javax.swing.JLabel SexoAlun;
    private javax.swing.JTable TabelaAlun;
    private javax.swing.JPanel TabelaPesquisaAlun;
    private javax.swing.JTabbedPane TelaAlun;
    private javax.swing.JLabel TelefoneAlun;
    private javax.swing.JLabel Titulo;
    private javax.swing.ButtonGroup buttonGroup1;
    private javax.swing.JLabel cpfAlun;
    private javax.swing.JLabel dataNascAlun;
    private javax.swing.JLabel emailAlun;
    private javax.swing.JTextArea fichaAluno;
    private javax.swing.JLabel fotoAlun;
    private javax.swing.JLabel fotoCadAlun;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JLabel nomeAlun;
    private javax.swing.JTextField pesquisarAlun;
    private javax.swing.JLabel sexoAlun;
    private javax.swing.JLabel telefoneAlun;
    // End of variables declaration//GEN-END:variables

}
